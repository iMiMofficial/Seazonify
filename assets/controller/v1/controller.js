!function(){const e="'Inter', 'ui-sans-serif', 'system-ui', 'sans-serif'";let n=[],t=[],o=null,a=null,i=null,s=null,l=null,r=null,c=!1,d=!1,u=0,f=!1;const p="https://cdn.jsdelivr.net/gh/iMiMofficial/Seazonify@main/assets/img/seazonify-logo.png";let m=null;const y=new Set,h=new Set,g=(...e)=>{false},x="seazonify_audio_consent",b="seazonify_no_auto_popup",z="seazonify_first_seen",v=e=>{try{localStorage.setItem(x,e?"1":"0")}catch{}g("audio consent set",e)},w=()=>{try{return"1"===localStorage.getItem(b)}catch{return!1}},E=e=>{try{localStorage.setItem(b,e?"1":"0")}catch{}g("noAutoPopup set",e)},k=()=>{try{return"1"===localStorage.getItem(z)}catch{return!1}},S=()=>{try{localStorage.setItem(z,"1")}catch{}g("first seen marked")};function C(e){return y.has(e)?(g("Script already loaded",e),Promise.resolve()):new Promise(((n,t)=>{const o=document.createElement("script");o.src=e,o.async=!0,o.onload=()=>{y.add(e),g("Script loaded",e),n()},o.onerror=()=>{g("Script load failed",e),t()},document.head.appendChild(o)}))}const A=document.createElement("style");A.textContent=`\n    .szfy-sidebar-btn {\n      font-family: ${e};\n      position: fixed;\n      top: 50%;\n      right: 0;\n      transform: translateY(-50%);\n      z-index: 9999;\n      background: #181f2a;\n      color: #fff;\n      border-radius: 20px 0 0 20px;\n      box-shadow: 0 2px 12px rgba(0,0,0,0.10);\n      padding: 8px 16px 8px 12px;\n      font-size: 0;\n      cursor: pointer;\n      border: 1px solid #232b3a;\n      display: flex;\n      align-items: center;\n      gap: 0;\n      transition: background 0.3s, box-shadow 0.2s;\n      opacity: 0.96;\n      width: auto;\n      height: auto;\n    }\n    .szfy-sidebar-btn.white {\n      background: #fff;\n      color: #181f2a;\n      border: 1px solid #e5e7eb;\n    }\n    .szfy-sidebar-btn:hover {\n      background: #232b3a;\n      box-shadow: 0 4px 18px rgba(0,0,0,0.13);\n      opacity: 1;\n    }\n    .szfy-overlay {\n      font-family: ${e};\n      position: fixed;\n      inset: 0;\n      background: rgba(8, 12, 20, 0.85);\n      backdrop-filter: blur(2px);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      animation: szfy-fade-in 0.18s;\n    }\n    @keyframes szfy-fade-in {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n    .szfy-modal {\n      font-family: ${e};\n      background: rgba(24, 31, 42, 0.85);\n      border-radius: 18px;\n      box-shadow: 0 6px 32px rgba(0,0,0,0.18);\n      border: 1.5px solid #232b3a;\n      padding: 28px 18px 18px 18px;\n      min-width: 260px;\n      max-width: 420px;\n      min-height: 220px;\n      max-height: 80vh;\n      width: 100%;\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      animation: szfy-pop-in 0.18s;\n      color: #f1f5f9;\n      overflow: hidden;\n    }\n    .szfy-nature {\n      position: absolute;\n      pointer-events: none;\n      z-index: 0;\n      opacity: 0.12;\n      animation: szfy-nature-float 8s infinite alternate ease-in-out;\n      filter: blur(0.5px);\n    }\n    .szfy-nature.n1 { left: 8px; top: 12px; width: 36px; animation-delay: 0s; }\n    .szfy-nature.n2 { right: 12px; top: 24px; width: 32px; animation-delay: 1.8s; }\n    .szfy-nature.n3 { left: 32px; bottom: 16px; width: 28px; animation-delay: 3.2s; }\n    .szfy-nature.n4 { right: 24px; bottom: 8px; width: 40px; animation-delay: 2.4s; }\n    .szfy-nature.n5 { left: 20px; top: 50%; width: 24px; animation-delay: 4.1s; }\n    .szfy-nature.n6 { right: 40px; top: 60%; width: 30px; animation-delay: 1.5s; }\n    @keyframes szfy-nature-float {\n      0% { transform: translateY(0) rotate(0deg) scale(1); }\n      100% { transform: translateY(-8px) rotate(2deg) scale(1.05); }\n    }\n    @keyframes szfy-pop-in {\n      from { transform: scale(0.97); opacity: 0; }\n      to { transform: scale(1); opacity: 1; }\n    }\n    .szfy-modal .szfy-close {\n      position: absolute;\n      top: 10px;\n      right: 10px;\n      background: #f1f5f9;\n      border: none;\n      font-size: 20px;\n      color: #64748b;\n      cursor: pointer;\n      transition: color 0.18s, background 0.18s;\n      padding: 2px 6px;\n      border-radius: 6px;\n      z-index: 2;\n    }\n    .szfy-modal .szfy-close:hover {\n      color: #ef4444;\n      background: #f1f5f9;\n    }\n    .szfy-brand {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 0;\n      margin-bottom: 10px;\n      z-index: 2;\n    }\n    .szfy-brand img {\n      height: 40px;\n      width: 40px;\n      border-radius: 10px;\n      box-shadow: none;\n      background: none;\n      margin-bottom: 2px;\n    }\n    .szfy-brand span {\n      font-size: 1.55rem;\n      font-weight: bold;\n      background: linear-gradient(135deg, #3b82f6, #60a5fa, #22d3a8, #fbbf24);\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n      background-clip: text;\n      text-fill-color: transparent;\n      display: block;\n      text-align: center;\n    }\n    .szfy-message {\n      font-size: 1.01rem;\n      color: #e0e7ef;\n      margin-bottom: 10px;\n      text-align: center;\n      font-weight: 500;\n      line-height: 1.4;\n      opacity: 0.92;\n      z-index: 2;\n      margin-top: 8px;\n      margin-bottom: 12px;\n    }\n    .szfy-instructions {\n      font-size: 0.97rem;\n      color: #cbd5e1;\n      margin-top: 8px;\n      margin-bottom: 2px;\n      text-align: center;\n      font-weight: 400;\n      z-index: 2;\n      margin-bottom: 14px;\n    }\n    .szfy-cards {\n      width: 100%;\n      display: flex;\n      gap: 10px;\n      margin-top: 2px;\n      margin-bottom: 10px;\n      z-index: 2;\n      justify-content: center;\n      flex-direction: row;\n      flex-wrap: nowrap;\n      margin-bottom: 18px;\n    }\n    .szfy-card {\n      background: rgba(36, 44, 60, 0.92);\n      border-radius: 10px;\n      box-shadow: 0 1px 8px rgba(0,0,0,0.10);\n      padding: 6px 4px 6px 4px;\n      min-width: 60px;\n      max-width: 75px;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      transition: box-shadow 0.18s, background 0.18s, border 0.18s;\n      cursor: pointer;\n      border: 2px solid transparent;\n      user-select: none;\n      font-size: 0.85rem;\n    }\n    .szfy-card.selected {\n      border: 2px solid #3b82f6;\n      background: rgba(36, 44, 60, 0.98);\n    }\n    .szfy-thumb {\n      width: 24px;\n      height: 24px;\n      border-radius: 6px;\n      margin-bottom: 4px;\n    }\n    .szfy-label {\n      font-size: 0.85rem;\n      font-weight: 600;\n      margin-bottom: 1px;\n    }\n    .szfy-desc {\n      font-size: 0.75rem;\n      color: #cbd5e1;\n      text-align: center;\n      line-height: 1.1;\n    }\n    .szfy-powered {\n      font-size: 0.72rem;\n      color: #b6c2d6;\n      margin-top: 18px;\n      text-align: center;\n      opacity: 0.85;\n      z-index: 2;\n      letter-spacing: 0.01em;\n      font-weight: 400;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 2px;\n    }\n    .szfy-powered .szfy-brand-gradient {\n      font-weight: bold;\n      background: linear-gradient(135deg, #3b82f6, #60a5fa, #22d3a8, #fbbf24);\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n      background-clip: text;\n      text-fill-color: transparent;\n      font-size: 0.82rem;\n      margin-left: 2px;\n      margin-right: 2px;\n      letter-spacing: 0.01em;\n    }\n    .szfy-powered a {\n      color: #3b82f6;\n      text-decoration: underline;\n      font-weight: 600;\n      transition: color 0.18s;\n    }\n    .szfy-powered a:hover {\n      color: #22d3a8;\n    }\n    @media (max-width: 600px) {\n      .szfy-modal {\n        min-width: 180px;\n        max-width: 98vw;\n        padding: 16px 6px 10px 6px;\n      }\n      .szfy-cards {\n        gap: 10px;\n      }\n      .szfy-card {\n        min-width: 60px;\n        max-width: 80px;\n        padding: 6px 4px 6px 4px;\n        font-size: 0.85rem;\n      }\n      .szfy-thumb {\n        width: 22px;\n        height: 22px;\n        margin-bottom: 3px;\n      }\n      .szfy-label {\n        font-size: 0.85rem;\n        margin-bottom: 1px;\n      }\n      .szfy-desc {\n        font-size: 0.75rem;\n        line-height: 1.1;\n      }\n      .szfy-message, .szfy-instructions {\n        font-size: 0.85rem;\n      }\n    }\n  `,document.head.appendChild(A);let T={audio:!1,visual:!1,overlay:null,modal:null,btn:null,selectedAudio:0,selectedVisual:0};function I(e){i&&(i.pause(),i.remove(),i=null),o=e,i=new Audio,i.src=e.url,i.loop=!1!==e.loop,i.volume="number"==typeof e.volume?e.volume:.2,i.autoplay=!0,i.id="szfy-audio",g("playAudioEffect",{url:e.url,loop:i.loop,volume:i.volume}),c&&u>0&&(i.currentTime=u);const n=i.play();f=!1,n&&"function"==typeof n.then&&n.then((()=>{v(!0)})).catch((()=>{f=!0,g("audioElement.play() blocked by browser - awaiting user gesture"),X()})),H()}function L(){i&&(i.pause(),c=!0,u=i.currentTime,g("pauseAudioEffect at",u),H())}function V(){i&&i.paused&&(g("resumeAudioEffect"),i.play().then((()=>{v(!0)})).catch((()=>{g("resume blocked; awaiting user gesture"),X()})),c=!1,H())}function N(){i&&(g("stopAudioEffect"),i.pause(),i.remove(),i=null),c=!1,u=0,H()}function P(e){if(_(),e){if(e.file){C(e.file.startsWith("http")?e.file:`/effects/${e.file}`).then((()=>{const e=t.length,n=setInterval((()=>{t.length>e&&(clearInterval(n),P(t[t.length-1]))}),50)})).catch((()=>{}))}e.css&&(l=document.createElement("style"),l.textContent=e.css,document.head.appendChild(l)),e.html&&(s=document.createElement("div"),s.innerHTML=e.html,s.id="szfy-visual",document.body.appendChild(s)),e.js&&(r=document.createElement("script"),r.textContent=e.js,document.body.appendChild(r)),d=!1}}function _(){s&&(s.remove(),s=null),l&&(l.remove(),l=null),r&&(r.remove(),r=null),d=!1}function H(){const e={audio:o?{src:o.url||o.src,paused:c,pauseTime:i?i.currentTime:0}:null,visual:a?{src:a.url||a.src}:null};g("saveSeazonifyState",e),localStorage.setItem("seazonify_state",JSON.stringify(e))}function U(){const e={visualUrls:t.map((e=>e.file)).filter(Boolean),audioUrls:n.map((e=>e.audioJsUrl)).filter(Boolean),lastSaved:Date.now()};localStorage.setItem("seazonify_cdn_state",JSON.stringify(e))}const M=I;I=function(e){M(e),H()};const j=L;L=function(){j(),H()};const $=V;V=function(){$(),H()};const J=N;N=function(){J(),H()};const D=P;P=function(e){D(e),H()};const O=_;function R(){if(!T.modal)return;g("renderModalContent",{audioCount:n.length,visualCount:t.length,stateAudio:T.audio,stateVisual:T.visual,audioPaused:c,audioPauseTime:u});const e=[];n.length&&n[T.selectedAudio]?.thumbnail&&e.push(n[T.selectedAudio].thumbnail),t.length&&t[T.selectedVisual]?.thumbnail&&e.push(t[T.selectedVisual].thumbnail),Promise.all(e.map((e=>function(e){return h.has(e)?Promise.resolve():new Promise(((n,t)=>{const o=new Image;o.onload=()=>{h.add(e),g("Image cached",e),n()},o.onerror=()=>{g("Image cache failed",e),t()},o.src=e}))}(e)))).catch((()=>{})),Array.from(T.modal.children).forEach((e=>{e.classList.contains("szfy-close")||e.classList.contains("szfy-brand")||e.classList.contains("szfy-nature")||T.modal.removeChild(e)}));const o=document.createElement("div");o.className="szfy-message",o.textContent="Enjoy immersive soundscapes and stunning visuals as you explore this site.",T.modal.appendChild(o);const a=T.audio&&n.length>0&&!c,i=T.visual&&t.length>0&&!d,l=document.createElement("div");l.className="szfy-cards";const r=document.createElement("div");r.className="szfy-card"+(a?" selected":""),r.innerHTML=`<img class="szfy-thumb" src="${n.length&&n[T.selectedAudio].thumbnail?n[T.selectedAudio].thumbnail:p}" alt="Audio Effect" /><div class="szfy-label">Audio</div><div class="szfy-desc">${n.length?n[T.selectedAudio].name:"No audio effect loaded."}</div>`,r.onclick=()=>{g("audioCard.click",{hasEffects:n.length>0,isActive:T.audio,paused:c}),n.length>0&&(T.audio&&!c?L():T.audio&&c?V():(T.audio=!0,v(!0),I(n[T.selectedAudio])),r.classList.toggle("selected",T.audio&&!c))};const f=document.createElement("div");f.className="szfy-card"+(i?" selected":""),f.innerHTML=`<img class="szfy-thumb" src="${t.length&&t[T.selectedVisual].thumbnail?t[T.selectedVisual].thumbnail:p}" alt="Visual Effect" /><div class="szfy-label">Visual</div><div class="szfy-desc">${t.length?t[T.selectedVisual].name:"No visual effect loaded."}</div>`,f.onclick=()=>{g("visualCard.click",{hasEffects:t.length>0,isActive:T.visual,hidden:d}),t.length>0&&(T.visual&&!d?s&&(s.style.display="none",d=!0):T.visual&&d?s&&d&&(s.style.display="",d=!1):(T.visual=!0,P(t[T.selectedVisual])),f.classList.toggle("selected",T.visual&&!d))},l.appendChild(r),l.appendChild(f),T.modal.appendChild(l);const m=document.createElement("div");m.className="szfy-instructions",m.textContent="Toggle audio or visual effects.",T.modal.appendChild(m);const y=document.createElement("div");y.style.margin="10px 0 0 0",y.style.display="flex",y.style.alignItems="center",y.style.gap="8px";const x=document.createElement("input");x.type="checkbox",x.id="szfy-hide-sidebar",x.checked="1"===localStorage.getItem("szfyHideSidebar"),x.onchange=function(){x.checked?(localStorage.setItem("szfyHideSidebar","1"),T.btn&&(T.btn.style.display="none")):(localStorage.removeItem("szfyHideSidebar"),T.btn&&(T.btn.style.display=""))};const b=document.createElement("label");b.htmlFor="szfy-hide-sidebar",b.style.fontSize="0.85em",b.style.color="#cbd5e1",b.textContent="Hide sidebar button",y.appendChild(x),y.appendChild(b),T.modal.appendChild(y);const z=document.createElement("div");z.style.margin="8px 0 0 0",z.style.display="flex",z.style.alignItems="center",z.style.gap="8px";const k=document.createElement("input");k.type="checkbox",k.id="szfy-no-auto-popup",k.checked=w(),k.onchange=function(){E(k.checked)};const S=document.createElement("label");S.htmlFor="szfy-no-auto-popup",S.style.fontSize="0.85em",S.style.color="#cbd5e1",S.textContent="Don't auto-open on new pages or refresh",z.appendChild(k),z.appendChild(S),T.modal.appendChild(z);const C=document.createElement("div");C.style.fontSize="0.85em",C.style.color="#a0aec0",C.style.marginTop="4px",C.style.textAlign="center",C.innerHTML="<strong>Tip:</strong> You can always open this controller by tripple-tapping, tripple-clicking anywhere, or pressing Ctrl+Shift+Z.",T.modal.appendChild(C);const A=document.createElement("div");A.className="szfy-powered";const N=encodeURIComponent(window.location.hostname);A.innerHTML=`Bring your site to life with <a href="https://seazonify.com?ref=${N}" target="_blank" rel="noopener"><span class="szfy-brand-gradient">Seazonify</span></a>.`,T.modal.appendChild(A)}function Y(){if(T.overlay)return;const e=document.createElement("div");e.className="szfy-overlay",e.onclick=n=>{n.target===e&&B()};const n=document.createElement("div");n.className="szfy-modal";const t=document.createElement("button");t.className="szfy-close",t.innerHTML="&times;",t.onclick=B,n.appendChild(t);const o=document.createElement("div");o.className="szfy-brand",o.innerHTML=`<img src="${p}" alt="Seazonify Logo" /><span>Seazonify</span>`,n.appendChild(o),T.modal=n,R(),e.appendChild(n),document.body.appendChild(e),T.overlay=e,k()||S(),X()}function B(){T.overlay&&(document.body.removeChild(T.overlay),T.overlay=null,T.modal=null)}function F(e){C(e).then((()=>{setTimeout((()=>{t.length>0&&(T.visual=!0,P(t[0]),T.modal&&R())}),100)})).catch((()=>{}))}function K(e){C(e).then((()=>{setTimeout((()=>{if(n.length>0){T.audio=!0,I(n[0]),T.modal&&R();const e=k()?500:7e3;setTimeout((()=>{T.overlay||w()||Y()}),e)}}),100)})).catch((()=>{}))}_=function(){O(),H()},window.addEventListener("DOMContentLoaded",(()=>{const e=function(){try{const e=JSON.parse(localStorage.getItem("seazonify_state"))||{};return g("loadSeazonifyState",e),e}catch{return g("loadSeazonifyState parse failed"),{}}}(),o=(()=>{try{return"1"===localStorage.getItem(x)}catch{return!1}})();g("audio consent on load",o),function t(a=0){if(!e.audio||!e.audio.src)return;const s=n.find((n=>n.url===e.audio.src||n.audioJsUrl===e.audio.src||n.src===e.audio.src));if(g("tryRestoreAudio",{attempt:a,src:e.audio.src,found:!!s,audioEffectsCount:n.length}),s)return e.audio&&o||(e.audio=!0),I(s),i&&e.audio.pauseTime&&(i.currentTime=e.audio.pauseTime),void(e.audio.paused&&L());a<20&&setTimeout((()=>t(a+1)),100)}(),function n(o=0){if(!e.visual||!e.visual.src)return;const a=t.find((n=>n.url===e.visual.src||n.visualJsUrl===e.visual.src||n.src===e.visual.src));g("tryRestoreVisual",{attempt:o,src:e.visual.src,found:!!a,visualEffectsCount:t.length}),a?P(a):o<20&&setTimeout((()=>n(o+1)),100)}()})),window.SeazonifyController={open:Y,close:B,setAudio:e=>{g("API setAudio",e),T.audio=!!e,e&&n.length?I(n[T.selectedAudio]):N()},setVisual:e=>{g("API setVisual",e),T.visual=!!e,e&&t.length?P(t[T.selectedVisual]):_()},isAudio:()=>!!T.audio,isVisual:()=>!!T.visual,injectAudioEffect:function(e){g("injectAudioEffect",e),n.push(e),U(),T.modal&&R()},injectVisualEffect:function(e){g("injectVisualEffect",e),t.push(e),U(),T.modal&&R()},clearAudioEffects:function(){g("clearAudioEffects"),n=[],N(),U(),T.modal&&R()},clearVisualEffects:function(){g("clearVisualEffects"),t=[],_(),U(),T.modal&&R()}},function(){if(T.btn)return;const e=document.createElement("button");e.className="szfy-sidebar-btn",e.innerHTML=`<img src="${p}" alt="Seazonify Logo" style="width:28px;height:28px;display:block;" />`,e.onclick=Y,document.body.appendChild(e),T.btn=e,m||(m=new Image,m.src=p,m.onload=()=>{g("Logo cached")},m.onerror=()=>{g("Logo cache failed")}),"1"===localStorage.getItem("szfyHideSidebar")&&(e.style.display="none")}(),function(){const e=document.currentScript;if(!e)return;const n=e.getAttribute("visual"),o=e.getAttribute("audio"),a=e.getAttribute("combo");if(g("loadEffectsFromURL",{visualParam:n,audioParam:o,comboParam:a}),n){n.split(",").map((e=>e.trim())).forEach((e=>{F(e)}))}if(o){o.split(",").map((e=>e.trim())).forEach((e=>{K(e)}))}if(a){a.split(",").map((e=>e.trim())).forEach((e=>{!function(e){C(e).then((()=>{setTimeout((()=>{t.length>0&&(T.visual=!0,P(t[0]),T.modal&&R())}),100)})).catch((()=>{}))}(e)}))}}();const q=function(){try{return JSON.parse(localStorage.getItem("seazonify_cdn_state")||"{}")}catch{return{}}}();q.visualUrls&&q.visualUrls.length>0&&q.visualUrls.forEach((e=>F(e))),q.audioUrls&&q.audioUrls.length>0&&q.audioUrls.forEach((e=>K(e)));let Z=0,W=0,G=0,Q="";function X(){if(!f)return;const e=()=>{i?i.play().then((()=>{g("audio resumed after user gesture"),f=!1,t()})).catch((()=>{})):t()},n=["click","touchstart","keydown"],t=()=>{n.forEach((n=>document.removeEventListener(n,e,!0)))};n.forEach((n=>document.addEventListener(n,e,!0)))}document.addEventListener("pointerup",(function(e){const n=Date.now();if(!1===e.isPrimary)return;const t="touch"===e.pointerType?"touch":"mouse"===e.pointerType?"mouse":"";if(t){if(Q&&Q!==t&&(Z=0,W=0),Q=t,n-G<2e3)return Z=0,void(W=n);if(n-W>600&&(Z=0),Z++,W=n,3===Z){if(!window.SeazonifyController||document.querySelector(".szfy-overlay"))return;if(e.target.closest(".szfy-modal"))return;window.SeazonifyController.open(),Z=0,G=n}}}),!0),document.addEventListener("keydown",(function(e){if((e.ctrlKey||e.metaKey)&&e.shiftKey&&("Z"===e.key||"z"===e.key)){const e=Date.now();if(e-G<2e3)return;if(!window.SeazonifyController||document.querySelector(".szfy-overlay"))return;window.SeazonifyController.open(),G=e}}))}();
